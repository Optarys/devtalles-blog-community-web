---
import type { TeamMember } from "@/data/team";
const { members = [] as TeamMember[] } = Astro.props;

const FALLBACK = "/assets/avatars/default.png"; // aseg√∫rate de tener este archivo
---

<div class="team-grid grid gap-6 sm:grid-cols-2 md:grid-cols-3 auto-rows-fr">
  {members.map((m: { avatar: any; name: unknown; role: unknown; bio: unknown; links: any[]; }) => (
    <article class="h-full min-h-[320px] flex flex-col rounded-2xl border border-white/10 bg-white/5 p-5">
      <div class="flex items-center gap-4">
        <!-- Avatar: SIEMPRE 96x96, circular, recorte centrado -->
        <figure class="team-avatar">
          <img
            src={m.avatar || FALLBACK}
            alt={String(m.name)}
            loading="lazy"
            decoding="async"
            onerror={`this.src='${FALLBACK}'; this.onerror=null;`}
          />
        </figure>

        <div class="min-w-0">
          <h3 class="font-semibold text-[var(--color-title)] leading-tight break-words">{m.name}</h3>
          <p class="mt-0.5 text-xs text-[var(--color-text)]/70">{m.role}</p>
        </div>
      </div>

      {m.bio && <p class="mt-4 text-sm text-[var(--color-text)]/80">{m.bio}</p>}

      {m.links?.length > 0 && (
        <ul class="mt-4 flex flex-wrap gap-x-3 gap-y-1 text-xs">
          {m.links.map((l: { href: string | URL | null | undefined; label: unknown; }) => (
            <li><a href={l.href} class="underline text-[var(--color-accent)] hover:opacity-80">{l.label}</a></li>
          ))}
        </ul>
      )}

      <div class="mt-auto"></div>
    </article>
  ))}
</div>

<style>
.team-grid .team-avatar{
  width:96px; height:96px;                
  flex:0 0 96px;                          
  border-radius:9999px;                   
  overflow:hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.1);
}
.team-grid .team-avatar > img{
  width:100% !important;
  height:100% !important;
  object-fit:cover !important;
  object-position:center !important;
  display:block !important;
  max-width:none !important;
  position:static !important;
}
</style>
